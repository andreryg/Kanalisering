<!doctype html>
<html>
    <head>
        <title>Kanalisering</title>
        <link rel="stylesheet" href="viewer.css">
    </head>
    <body>
        <div class=upper>
            <button onclick = "Open();">{X:}</button>
            <button onclick = "ClearStorage();">Clear local storage</button>
        </div>
        <div class=lower>
            <iframe id="Kart" width="100%" height="100%" bottom="0"></iframe>
        </div>
        <script src="koordinater.js"></script>
        <script type = "text/javascript">
            
            //console.log(koordinater)
            
            let i = localStorage.getItem("i") ? Number(localStorage.getItem("i")) : 0;
            var link = `https://vegkart.test.atlas.vegvesen.no/#kartlag:nib/@${koordinater[i][0]},${koordinater[i][1]},16`;
            const Kart = document.getElementById("Kart");
            
            Kart.src = link
            Kart.onload = function() {
                //Kart.contenWindow.scrollTo(100, 100)
                setTimeout(function(){
                    console.log("dog")
                    document.elementFromPoint(300, 30).click()
                }, 8000)
            }

            function ClearStorage() {
                console.log("Cleared")
                window.localStorage.clear();
                location.reload()
                
            }
            function Open() {
                
                ++i;
                localStorage.setItem("i", i)
                console.log(i)
            
                link = `https://vegkart.atlas.vegvesen.no/#kartlag:nib/@${koordinater[i][0]},${koordinater[i][1]},16`;
                Kart.src = link
                location.reload()
            }
        </script>
    </body>
</html>